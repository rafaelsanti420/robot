# Полный список методов

Этот документ описывает основные HTTP методы для каждого микросервиса, необходимые для полноценной работы торговой платформы. Описанные маршруты являются рекомендованным API и могут быть расширены.

## 1. API Gateway

Внешняя точка входа для клиентов и веб‑интерфейса. Выполняет аутентификацию пользователей и проксирует запросы к внутренним сервисам.

| Метод | Путь | Описание |
|-------|------|----------|
| `POST` | `/register` | Регистрация нового пользователя. |
| `POST` | `/login` | Получение JWT токена. |
| `GET` | `/services` | Состояние внутренних сервисов. |
| `POST` | `/activity` | Включить/выключить внешнюю активность (переключатель торговли). |
| `CRUD` | `/strategies` | Управление стратегиями (создание, получение, обновление, удаление). |
| `POST` | `/strategies/{name}/start` | Запуск стратегии. |
| `POST` | `/strategies/{name}/stop` | Остановка стратегии. |
| `GET` | `/ws` | WebSocket канал для трансляции событий. |

## 2. Indicator Engine

Сервис вычисляет торговые индикаторы и кэширует результаты.

| Метод | Путь | Описание |
|-------|------|----------|
| `POST` | `/ma` | Скользящая средняя (SMA). |
| `POST` | `/ema` | Экспоненциальная скользящая средняя (EMA). |
| `POST` | `/rsi` | Индекс относительной силы (RSI). |
| `POST` | `/macd` | Конвергенция/дивергенция скользящих средних (MACD). |
| `POST` | `/custom` | Расчёт пользовательского индикатора по заданной формуле. |

## 3. Strategy Engine

Хранит стратегии и принимает решения о покупке/продаже на основании индикаторов.

| Метод | Путь | Описание |
|-------|------|----------|
| `POST` | `/strategy` | Создать стратегию. |
| `GET` | `/strategy/{name}` | Получить стратегию по имени. |
| `GET` | `/strategies` | Список всех стратегий. |
| `DELETE` | `/strategy/{name}` | Удалить стратегию. |
| `POST` | `/strategy/{name}/enable` | Активировать стратегию. |
| `POST` | `/strategy/{name}/disable` | Деактивировать стратегию. |

## 4. Trade Executor

Отвечает за отправку заявок на биржу и управление ордерами.

| Метод | Путь | Описание |
|-------|------|----------|
| `POST` | `/toggle` | Глобальное включение/выключение торговли. |
| `POST` | `/order` | Создание рыночного или лимитного ордера. |
| `POST` | `/order/cancel` | Отмена существующего ордера. |
| `GET` | `/orders` | Список активных ордеров и их статусы. |

## 5. Market Data

Предоставляет исторические и стримовые рыночные данные.

| Метод | Путь | Описание |
|-------|------|----------|
| `GET` | `/candles` | Получение OHLC данных. |
| `GET` | `/quotes/ws` | WebSocket подписка на котировки в реальном времени. |
| `GET` | `/symbols` | Список доступных торговых инструментов. |

## 6. Backtester

Позволяет запускать бэктесты стратегий на исторических данных.

| Метод | Путь | Описание |
|-------|------|----------|
| `POST` | `/run` | Запуск бэктеста с параметрами (стратегия, период, символ). |
| `GET` | `/result/{id}` | Получение результатов бэктеста. |
| `GET` | `/artifacts/{id}` | Загрузка артефактов (JSON отчёт, графики). |

## 7. Common Library

Общие модули, используемые во всех сервисах.

- Аутентификация и создание JWT токенов.
- Pydantic модели для запросов и ответов.
- Логирование и настройки через `.env` файлы.

---

Этот список не является исчерпывающим. Реальная торговая система может включать дополнительные методы и интеграции (например, уведомления в Telegram, обработку ошибок биржи, расширенные отчёты бэктестов). Однако перечисленные выше маршруты образуют минимальный API для полноценной работы платформы.
